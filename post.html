<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Aaquib Syed</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .post-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .post-content h1 {
            border-bottom: 2px solid var(--divider-color);
            padding-bottom: 10px;
            margin-bottom: 0.5em;
        }

        .post-content p {
            margin-bottom: 1.2em;
        }

        .post-content em {
            font-style: italic;
        }
    </style>
</head>

<body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle Dark Mode">Dark Mode</button>

    <div class="nav-bar">
        <a href="index.html">‚Üê Back to Home</a>
    </div>

    <div id="post-content" class="post-content">
        <p>Loading post...</p>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('slug');

            if (slug) {
                fetch(slug)
                    .then(response => {
                        if (!response.ok) throw new Error('Post not found');
                        return response.text();
                    })
                    .then(markdown => {
                        const contentDiv = document.getElementById('post-content');
                        contentDiv.innerHTML = marked.parse(markdown);

                        const h1 = contentDiv.querySelector('h1');
                        if (h1) {
                            document.title = h1.innerText + " - Aaquib Syed";
                        }
                    })
                    .catch(error => {
                        document.getElementById('post-content').innerHTML = `
                            <p>Error loading post: ${error.message}</p>
                            <p><em>Note: If you are opening this file locally (file://), your browser may block the fetch request. Please run a local web server (e.g., 'python3 -m http.server').</em></p>
                        `;
                    });
            } else {
                document.getElementById('post-content').innerHTML = "<p>No post specified.</p>";
            }
        });
    </script>
</body>

</html>